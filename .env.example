## DocMind AI .env (copy from this file)
## Nested mapping: DOCMIND_SECTION__FIELD -> settings.section.field

# ============================================================================
# CORE APPLICATION SETTINGS (FLAT FORMAT - TOP LEVEL)
# ============================================================================


# Backend configuration (flat - maps to settings.llm_backend)
DOCMIND_LLM_BACKEND=ollama

## Agents
DOCMIND_AGENTS__ENABLE_MULTI_AGENT=true
DOCMIND_AGENTS__DECISION_TIMEOUT=200
DOCMIND_AGENTS__MAX_RETRIES=2
DOCMIND_AGENTS__ENABLE_FALLBACK_RAG=true
DOCMIND_AGENTS__MAX_CONCURRENT_AGENTS=3
DOCMIND_AGENTS__ENABLE_PARALLEL_TOOL_EXECUTION=true
DOCMIND_AGENTS__CONTEXT_BUFFER_SIZE=131072

## LLM
DOCMIND_VLLM__MODEL=Qwen/Qwen3-4B-Instruct-2507-FP8
DOCMIND_OLLAMA_BASE_URL=http://localhost:11434
DOCMIND_LMSTUDIO_BASE_URL=http://localhost:1234/v1
DOCMIND_VLLM__VLLM_BASE_URL=http://localhost:8000
DOCMIND_VLLM__TEMPERATURE=0.1
DOCMIND_VLLM__MAX_TOKENS=2048
DOCMIND_VLLM__CONTEXT_WINDOW=131072
DOCMIND_UI__REQUEST_TIMEOUT_SECONDS=120
DOCMIND_UI__STREAMLIT_PORT=8501
DOCMIND_UI__ENABLE_DARK_MODE=true
DOCMIND_UI__RESPONSE_STREAMING=true
DOCMIND_UI__MAX_HISTORY_ITEMS=100
DOCMIND_OPENAI_LIKE_API_KEY=not-needed
DOCMIND_OPENAI_LIKE_IS_CHAT_MODEL=true
DOCMIND_OPENAI_LIKE_IS_FUNCTION_CALLING_MODEL=false
DOCMIND_LLM_REQUEST_TIMEOUT_SECONDS=120
DOCMIND_LLM_STREAMING_ENABLED=true

## Embeddings
DOCMIND_EMBEDDING__MODEL_NAME=BAAI/bge-m3
DOCMIND_EMBEDDING__DIMENSION=1024
DOCMIND_EMBEDDING__MAX_LENGTH=8192
DOCMIND_EMBEDDING__BATCH_SIZE_GPU=12
DOCMIND_EMBEDDING__BATCH_SIZE_CPU=4

## Processing
DOCMIND_PROCESSING__CHUNK_SIZE=1024
DOCMIND_PROCESSING__CHUNK_OVERLAP=100
DOCMIND_PROCESSING__NEW_AFTER_N_CHARS=1200
DOCMIND_PROCESSING__COMBINE_TEXT_UNDER_N_CHARS=500
DOCMIND_PROCESSING__MULTIPAGE_SECTIONS=true

## Retrieval
DOCMIND_RETRIEVAL__STRATEGY=hybrid
DOCMIND_RETRIEVAL__TOP_K=10
DOCMIND_RETRIEVAL__USE_RERANKING=true
DOCMIND_RETRIEVAL__RERANKING_TOP_K=5
DOCMIND_RETRIEVAL__USE_SPARSE_EMBEDDINGS=true
DOCMIND_RETRIEVAL__ROUTER=auto
DOCMIND_RETRIEVAL__HYBRID__ENABLED=true
DOCMIND_RETRIEVAL__HIERARCHY__ENABLED=true
DOCMIND_RETRIEVAL__GRAPH__ENABLED=false
## RRF fusion
DOCMIND_RETRIEVAL__RRF_ALPHA=60
DOCMIND_RETRIEVAL__RRF_K_CONSTANT=60
DOCMIND_RETRIEVAL__RERANKER_NORMALIZE_SCORES=true
DOCMIND_RETRIEVAL__RERANKER_MODE=auto
DOCMIND_RETRIEVAL__RERANKER_MODEL=BAAI/bge-reranker-v2-m3

## Cache
DOCMIND_CACHE__ENABLE_DOCUMENT_CACHING=true
DOCMIND_CACHE__TTL_SECONDS=3600
DOCMIND_CACHE__MAX_SIZE_MB=1000
DOCMIND_CACHE__DIR=./cache
DOCMIND_CACHE__FILENAME=docmind.duckdb

## Database (Qdrant + SQLite)
DOCMIND_DATABASE__SQLITE_DB_PATH=./data/docmind.db
DOCMIND_DATABASE__ENABLE_WAL_MODE=true
DOCMIND_DATABASE__QDRANT_URL=http://localhost:6333
DOCMIND_DATABASE__QDRANT_COLLECTION=docmind_docs
DOCMIND_DATABASE__QDRANT_TIMEOUT=60

## Monitoring & performance
DOCMIND_ENABLE_GPU_ACCELERATION=true
DOCMIND_MONITORING__MAX_MEMORY_GB=4.0
DOCMIND_MONITORING__MAX_VRAM_GB=14.0
DOCMIND_MONITORING__MAX_QUERY_LATENCY_MS=2000
DOCMIND_MONITORING__ENABLE_PERFORMANCE_LOGGING=true
DOCMIND_MONITORING__DEFAULT_BATCH_SIZE=20

## vLLM server
DOCMIND_VLLM__GPU_MEMORY_UTILIZATION=0.95
DOCMIND_VLLM__ATTENTION_BACKEND=FLASHINFER
DOCMIND_VLLM__ENABLE_CHUNKED_PREFILL=true
DOCMIND_VLLM__MAX_NUM_BATCHED_TOKENS=8192
DOCMIND_VLLM__MAX_NUM_SEQS=16
DOCMIND_VLLM__VLLM_BASE_URL=http://localhost:8000
VLLM_ATTENTION_BACKEND=FLASHINFER
VLLM_KV_CACHE_DTYPE=fp8_e5m2
VLLM_GPU_MEMORY_UTILIZATION=0.95
VLLM_ENABLE_CHUNKED_PREFILL=true
# Optional advanced server flags (uncomment if needed)
# VLLM_USE_CUDNN_PREFILL=1
# VLLM_CALCULATE_KV_SCALES=true
# VLLM_TORCH_BACKEND=cu128
VLLM_MODEL=Qwen/Qwen3-4B-Instruct-2507-FP8
VLLM_TENSOR_PARALLEL_SIZE=1
VLLM_MAX_MODEL_LEN=131072

## Semantic cache (ADR-035) [planned]
DOCMIND_SEMANTIC_CACHE__ENABLED=false
DOCMIND_SEMANTIC_CACHE__PROVIDER=gptcache
DOCMIND_SEMANTIC_CACHE__SCORE_THRESHOLD=0.85
DOCMIND_SEMANTIC_CACHE__TTL_SECONDS=1209600
DOCMIND_SEMANTIC_CACHE__TOP_K=5
DOCMIND_SEMANTIC_CACHE__MAX_RESPONSE_BYTES=24000
DOCMIND_SEMANTIC_CACHE__NAMESPACE=default

## Chat memory & Analysis modes [planned]
DOCMIND_CHAT__SQLITE_PATH=./data/docmind.db
DOCMIND_ANALYSIS__MODE=auto
DOCMIND_ANALYSIS__MAX_WORKERS=4

## GraphRAG [planned]
DOCMIND_GRAPHRAG__ENABLED=false
DOCMIND_GRAPHRAG__RELATIONSHIP_EXTRACTION=false
DOCMIND_GRAPHRAG__ENTITY_RESOLUTION=fuzzy
DOCMIND_GRAPHRAG__MAX_HOPS=2
DOCMIND_GRAPHRAG__MAX_TRIPLETS=1000
DOCMIND_GRAPHRAG__CHUNK_SIZE=1024

## DSPy optimization [planned]
DOCMIND_ENABLE_DSPY_OPTIMIZATION=false
DOCMIND_DSPY_OPTIMIZATION_ITERATIONS=10
DOCMIND_DSPY_OPTIMIZATION_SAMPLES=20
DOCMIND_DSPY_MAX_RETRIES=3
DOCMIND_DSPY_TEMPERATURE=0.1
DOCMIND_DSPY_METRIC_THRESHOLD=0.8
DOCMIND_ENABLE_DSPY_BOOTSTRAPPING=true

VLLM_ENABLE_PREFIX_CACHING=true
VLLM_USE_V2_BLOCK_MANAGER=true
VLLM_QUANTIZATION=fp8
VLLM_MAX_NUM_SEQS=256

# PyTorch and CUDA configuration
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512
TOKENIZERS_PARALLELISM=false
CUDA_VISIBLE_DEVICES=0
NVIDIA_VISIBLE_DEVICES=all
CUDA_HOME=/usr/local/cuda

## FILE SYSTEM & PERSISTENCE (FLAT FORMAT - TOP LEVEL)
## Data directories (flat - maps to settings.data_dir, settings.cache_dir)
DOCMIND_DATA_DIR=./data
DOCMIND_CACHE_DIR=./cache

# Logging (flat - maps to settings.log_file, settings.log_level, settings.enable_performance_logging)
DOCMIND_LOG_FILE=./logs/docmind.log
DOCMIND_LOG_LEVEL=INFO
DOCMIND_MONITORING__ENABLE_PERFORMANCE_LOGGING=true
